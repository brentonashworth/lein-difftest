h1. lein-difftest

Leiningen plugin for running clojure.test tests. Works exactly the same as "lein test" but with alternate test reporting. When a test fails, the report shows the diff of the actual and expected forms. When a test fails due to an error, stacktraces are cleaned up with clj-stacktrace.

If you use this with Leiningen then you must have Leiningen 1.2 or greater. It will work from the REPL with any version of Clojure.

Note: If your project depends on Clojure 1.2 but not Contrib 1.2 then you will need to add Contrib 1.2 as a dependency to your project. clj-stacktrace depends on Contrib 1.1. This version of Contrib will be added to your project if you don't already have a dependency on Contrib. Contrib 1.1 and Clojure 1.2 do not work together.

h2. Leiningen Usage

Add <code>[lein-difftest "1.2.0"]</code> to your project's :dev-dependencies.

<pre>
<code>
$ lein deps
$ lein test
</code>
</pre>

This plugin uses Robert Hooke to change the behavior of the Leiningen test task. If you want to go back to standard test output then you will need to remove this plugin.

h2. REPL Usage

<pre>
<code>
user> (require 'difftest.core)
user> (difftest.core/run-tests 'some.test.namespace)
</code>
</pre>

<code>difftest.core/run-tests</code> has the same interface as <code>clojure.test/run-tests</code>.

h2. Dependencies

Apart from Clojure, clojure.test and Leiningen, lein-difftest is built on top of other fine libraries:

* "Robert Hooke":http://github.com/technomancy/robert-hooke
* "difform":http://github.com/GeorgeJahad/difform
* "clj-stacktrace":http://github.com/mmcgrana/clj-stacktrace
* "google-diff-match-patch":http://code.google.com/p/google-diff-match-patch/

h2. License

Copyright (C) 2010 Brenton Ashworth

Distributed under the Eclipse Public License, the same as Clojure uses. See the file COPYING.

